# 3.서비스 관리
## 3.1 Finger 서비스 비활성

||취약점 개요|
|:-:|:-|
|점검내용|finger 서비스 비활성화 여부 점검|
|점검목적|Finger(사용자 정보 확인 서비스)를 통해서 네트워크 외부에서 해당 시스템에 등록된 사용자 정보를 확인할 수 있어 비인가자에게 사용자 정보가 조회되는 것을 차단하고자 함|
|보안위협|비인가자에게 사용자 정보가 조회되어 패스워드 공격을 통한 시스템 권한 탈취 가능성이 있으므로 사용하지 않는다면 해당 서비스를 중지하여야 함|
|참고|※ Finger(사용자 정보 확인 서비스): who 명령어가 현재 사용 중인 사용자들에 대한 간단한 정보만을 보여주는 데 반해 Finger 명령은 옵션에 따른 시스템에 등록된 사용자뿐만 아니라 네트워크를 통하여 연결되어 있는 다른 시스템에 등록된 사용자들에 대한 자세한 정보를 보여줌|
||점검대상 및 판단기준| 
|대상|SOLARIS, LINUX, AIX, HP-UX 등|
|판단기준|양호 : Finger 서비스가 비활성화 되어 있는 경우 </br>취약 : Finger 서비스가 활성화 되어 있는 경우|
|조치방법|Finger 서비스 비활성화|
||점검 및 조치 사례|
||OS별 점검 파일 위치 및 점검 방법|
|LINUX, AIX, HP-UX, SOLARIS 5.9 이하 버전|#cat /etc/inetd.conf </br>#finger stream tcp nowait bin /usr/lbin/fingered </br>finered 주석처리 확인|
|SOLARIS 5.10 이상 버전|#inetadm | grep "finger"|
|LINUX (xinetd일 경우)|#ls -alL /etc/xinetd.d/* \| egrep "echo finger"|
||위에 제시된 파일 내 "finger" 서비스가 활성화된 경우 아래의 보안설정방법에 따라 서비스 중지|

* **LINUX, AIX, HP-UX, SOLARIS 5.9 이하 버전**
* Step 1) "/etc/inetd.conf" 파일에서 finger 서비스 라인 주석처리
  * (수정 전) #finger stream tcp nowait bin /usr/lbin/fingered fingerd
  * (수정 후) #finger stream tcp nowait bin /usr/lbin/fingered fingerd
* Step 2) inetd 서비스 재시작
  * #ps -ef | grep inetd
  * kill -HUP [PID]
 
* **SOLARIS 5.10 이상 버전**
  * inetadm -d "중지하고자 하는 데몬" 명령으로 서비스 데몬 중지
  * #inetadm -d svc:/network/finger:default
 
* **LINUX (xinetd일 경우)**
* Step 1) vi 편집기를 이용하여 "/etc/C/finger" 파일 열기
* Step 2) 아래와 같이 설정 (disable = yes 설정)
```
service finger
{
  socket_type    = stream
  wait           = no
  user           = nobody
  server         = /usr/sbin/in.fingerd
  disable        = yes
}
```
* Step 3) xinetd 서비스 재시작
  * #service xinetd restart

## 3.2 Anonymous FTP 비활성화

||취약점 개요|
|:-:|:-|
|점검내용|익명 FTP 접속 허용 여부 점검|
|점검목적|실행중인 FTP 서비스에 익명 FTP 접속이 허용되고 있는지 확인하여 접속허용을 차단하는 것을 목적으로 함|
|보안위협|Anonymous FTP(익명 FTP)를 사용 시 anonymous 계정으로 로그인 후 디렉터리에 쓰기 권한이 설정되어 있다면 악의적인 사용자가 local exploit을 사용하여 시스템에 대한 공격을 가능하게 함|
|참고|※ Anonymous FTP(익명 FTP): 파일 전송을 위해서는 원칙적으로 상대방 컴퓨터를 사용할 수 있는 계정이 필요하나 누구든지 계정이 없이도 anonymous 또는 ftp라는 로그인 명과 임의의 비밀번호를 사용하여 FTP를 실행할 수 있음|
||점검대상 및 판단기준| 
|대상|SOLARIS, LINUX, AIX, HP-UX 등|
|판단기준|양호 : Anonymous FTP 접속을 차단한 경우 </br>취약 : Anonymous FTP 접속을 차단하지 않은 경우|
|조치방법|Anonymous FTP를 사용하지 않는 경우 Anonymous FTP 접속 차단 설정 적용|
||점검 및 조치 사례|
||OS별 점검 파일 위치 및 점검 방법|
|SOLARIS, LINUX, AIX, HP-UX|/etc/passwd 파일에 ftp 계정 존재 여부 확인 </br>#cat /etc/passwd | grep "ftp"|
||"passwd" 파일 내 ftp 계정이 존재하는 경우 아래의 보안설정방법에 따라 서비스 접속 제한|

* **SOLARIS, LINUX, AIX, HP-UX**
* Case 1) 일반 FTP - Anonymous FTP 접속 제한 설정 방법
  * "/etc/passwd" 파일에서 ftp 또는, anonymous 계정 삭제
  * SOLARIS, LINUX, HP-UX 설정: #userdel ftp
  * AIX 설정: #rmuser ftp
* Case 2) proFTP - Anonymous FTP 접속 제한 설정 방법
  * conf/proftpd.conf 파일의 anonymous 관련 설정 중 User, Useralias 항목 주석처리
  * (proftpd.conf 파일의 위치는 운영체제 종류별로 상이함)
  * <Anonymous ~ftp>          <- Anonymous 설정 구간
  * \# User   ftp             <- anonymous로 사용되는 계정
  * Group     ftp
  * \# UserAlias anonymous ftp <- 별칭으로 사용되는 계정
  * ~이하생략~
  * </Anonymous>
* Case 3) vsFTP - Anonymous FTP 접속 제한 설정 방법
 * vsFTP 설정파일("/etc/vsftpd/vsftpd.conf" 또는, "/etc/vsftpd.conf")에서 anonymous_enable=NO 설정
